# 快速入门

<cite>
**本文档引用的文件**   
- [README.md](file://README.md)
- [config.example.json](file://config.example.json)
- [run.py](file://run.py)
- [pyproject.toml](file://pyproject.toml)
- [alphahome/common/config_manager.py](file://alphahome/common/config_manager.py)
- [alphahome/common/task_system/base_task.py](file://alphahome/common/task_system/base_task.py)
- [alphahome/fetchers/sources/tushare/tushare_task.py](file://alphahome/fetchers/sources/tushare/tushare_task.py)
- [alphahome/fetchers/tasks/stock/tushare_stock_daily.py](file://alphahome/fetchers/tasks/stock/tushare_stock_daily.py)
- [alphahome/gui/main_window.py](file://alphahome/gui/main_window.py)
</cite>

## 目录
1. [简介](#简介)
2. [环境准备](#环境准备)
3. [项目克隆与依赖安装](#项目克隆与依赖安装)
4. [数据库与API配置](#数据库与api配置)
5. [通过GUI启动任务](#通过gui启动任务)
6. [通过CLI启动任务](#通过cli启动任务)
7. [常见问题](#常见问题)

## 简介

本指南旨在帮助新用户快速上手alphaHome项目，从零开始完成环境搭建并成功运行第一个数据获取任务。alphaHome是一个专注于金融数据获取、处理和管理的量化数据平台。本指南将详细介绍从克隆项目、安装依赖到配置数据库和API密钥的完整步骤，并提供通过图形用户界面（GUI）和命令行界面（CLI）启动任务的具体示例。

**Section sources**
- [README.md](file://README.md#L1-L144)

## 环境准备

在开始之前，请确保您的系统已安装以下必要依赖：

- **Python 3.9 或更高版本**：项目在 `pyproject.toml` 文件中明确要求 `requires-python = ">=3.9"`。
- **PostgreSQL 数据库**：项目使用PostgreSQL作为主要数据存储，配置文件中指定了连接信息。

**Section sources**
- [pyproject.toml](file://pyproject.toml#L13)
- [config.example.json](file://config.example.json#L3-L11)

## 项目克隆与依赖安装

按照以下步骤克隆项目并安装所有依赖项：

1.  **克隆项目仓库**：
    打开终端或命令行工具，执行以下命令来克隆项目：
    ```bash
    git clone https://github.com/your-repo/alphahome.git
    cd alphahome
    ```
    *注：`your-repo` 应替换为实际的仓库地址。*

2.  **安装项目依赖**：
    使用 `pip` 以开发模式安装项目及其所有依赖。这允许您直接修改代码而无需重新安装。
    ```bash
    pip install -e .
    ```
    此命令会读取 `pyproject.toml` 文件，安装包括 `tushare`、`pandas`、`asyncpg` 等在内的所有必需依赖。

**Section sources**
- [README.md](file://README.md#L110-L116)
- [pyproject.toml](file://pyproject.toml#L21-L35)

## 数据库与API配置

正确配置数据库连接和API密钥是项目运行的关键。项目使用 `config.example.json` 作为模板。

1.  **复制配置文件**：
    将项目根目录下的 `config.example.json` 复制到用户配置目录，并重命名为 `config.json`。根据 `config_manager.py` 的代码，用户配置目录为 `~/.alphahome/`。
    ```bash
    # 在项目根目录下执行
    cp config.example.json ~/.alphahome/config.json
    ```

2.  **编辑配置文件**：
    使用文本编辑器打开 `~/.alphahome/config.json` 文件，并根据您的实际情况填写以下信息：
    - **数据库连接 (`database.url`)**：修改 `postgresql://username:password@localhost:5432/alphadb` 中的 `username`、`password` 和 `alphadb` 为您自己的数据库用户名、密码和数据库名。
    - **Tushare API Token (`api.tushare_token`)**：将 `your_tushare_token_here` 替换为您从Tushare官网获取的个人API令牌。

    配置文件示例如下：
    ```json
    {
        "database": {
            "url": "postgresql://myuser:mypassword@localhost:5432/myalphadb"
        },
        "api": {
            "tushare_token": "your_actual_tushare_token"
        }
    }
    ```

**Section sources**
- [README.md](file://README.md#L68-L69)
- [config.example.json](file://config.example.json#L1-L63)
- [alphahome/common/config_manager.py](file://alphahome/common/config_manager.py#L36-L41)

## 通过GUI启动任务

项目提供了一个图形用户界面（GUI）来简化任务的执行。

1.  **启动GUI**：
    确保您位于项目的根目录下，然后运行 `run.py` 文件。
    ```bash
    python run.py
    ```
    这将启动一个图形窗口。

2.  **运行任务**：
    在GUI中，您可以通过“任务运行”标签页选择并执行任务。例如，要获取股票日线数据，您可以选择 `tushare_stock_daily` 任务，并设置执行模式（如智能更新 `smart`）、开始日期和结束日期，然后点击“运行”按钮。

**Section sources**
- [README.md](file://README.md#L71-L72)
- [run.py](file://run.py#L1-L28)
- [alphahome/gui/main_window.py](file://alphahome/gui/main_window.py#L402-L412)

## 通过CLI启动任务

对于高级用户或自动化脚本，可以使用命令行工具直接运行任务。

1.  **查看可用任务**：
    首先，您可以列出所有可用的任务，以确认 `tushare_stock_daily` 任务已注册。
    ```bash
    alphahome task list
    ```

2.  **运行股票日线数据任务**：
    使用 `alphahome task run` 命令来执行 `tushare_stock_daily` 任务。以下是一些示例：
    - **智能增量更新**（推荐）：仅获取自上次更新以来的新数据。
        ```bash
        alphahome task run tushare_stock_daily --update-type smart
        ```
    - **指定日期范围**：获取特定时间段的数据。
        ```bash
        alphahome task run tushare_stock_daily --start-date 20240101 --end-date 20241231
        ```
    - **全量更新**：获取所有历史数据。
        ```bash
        alphahome task run tushare_stock_daily --update-type full
        ```

    该任务会从Tushare API获取数据，经过处理和验证后，自动保存到PostgreSQL数据库的 `stock_daily` 表中。

**Section sources**
- [README.md](file://README.md#L75-L87)
- [alphahome/common/task_system/base_task.py](file://alphahome/common/task_system/base_task.py#L58)
- [alphahome/fetchers/tasks/stock/tushare_stock_daily.py](file://alphahome/fetchers/tasks/stock/tushare_stock_daily.py#L1-L178)

## 常见问题

- **Q: 运行 `pip install -e .` 时出现错误？**
  A: 请确保您的Python版本符合要求（>=3.9），并检查 `pyproject.toml` 文件中的依赖项是否都能正常安装。

- **Q: 启动GUI时提示数据库连接失败？**
  A: 请检查 `~/.alphahome/config.json` 文件中的 `database.url` 配置是否正确，并确保PostgreSQL服务正在运行。

- **Q: 运行任务时提示“未提供 Tushare API 令牌”？**
  A: 请确认已在 `config.json` 文件中正确填写了 `api.tushare_token`。

**Section sources**
- [README.md](file://README.md#L78-L87)
- [alphahome/common/config_manager.py](file://alphahome/common/config_manager.py#L96-L101)
- [alphahome/fetchers/sources/tushare/tushare_task.py](file://alphahome/fetchers/sources/tushare/tushare_task.py#L76-L80)