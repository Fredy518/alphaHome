# 文档更新记录

本文档记录了 AlphaHome 项目文档的重要更新和变更。

## 📋 **2025-09-01 - G因子简化改造 (v1.1)**

### **🆕 核心变更**
- **移除时效性权重系统**: 统一所有数据源权重为1.0，消除数据源偏好
- **简化配置管理**: 移除复杂的权重配置参数，提高可维护性
- **保持数据完整性**: 仍然记录数据源信息用于分析和监控

### **📝 技术改进**
- `research/pgs_factor/processors/production_g_factor_calculator.py` (v1.1)
  - 移除 `timeliness_weights` 动态配置，统一为静态权重1.0
  - 简化所有子因子计算方法，移除 `timeliness_weight` 参数
  - 更新文档字符串，反映简化后的计算逻辑
- `research/pgs_factor/production_g_factor_runner.py` (v1.1)
  - 移除 `--enable-timeliness-weighting` 等权重相关CLI参数
  - 简化配置构建逻辑，提高运行脚本的简洁性
- `tests/unit/test_g_factor_calculator.py` (v1.1)
  - 重写测试用例，移除权重相关配置
  - 添加统一权重系统的功能验证测试

### **✅ 验证结果**
- 权重系统移除验证: ✅ 通过
- 数据源信息保留验证: ✅ 通过
- 计算方法签名验证: ✅ 通过
- 所有linter检查: ✅ 通过

### **🎯 改造目标**
- **提高可解释性**: 因子计算逻辑更清晰，无权重偏好干扰
- **降低维护复杂度**: 减少配置参数管理，简化系统架构
- **提升稳定性**: 避免权重变化对因子值的影响
- **保持数据完整性**: 仍然记录数据源信息用于分析

### **📊 影响分析**
- **正向影响**: 简化架构、提高可维护性、增强因子解释性
- **中性影响**: 数据源信息仍然保留，统计功能保持正常
- **潜在影响**: 个股选股策略可能需要重新评估数据源分布影响

---

## 📋 **2025-08-08 - 财务数据处理技术指南 (v2.2)**

### **🆕 新增文档**
- `docs/development/financial_data_processing_guide.md` - 财务数据处理技术指南
  - 详细记录PIT数据库设计原理和单季化转换逻辑
  - 完整覆盖边界情况处理策略（仅年报、中报+年报、完整季报模式）
  - 明确Tushare数据源单位差异和转换规则
  - 提供常见陷阱解决方案和数据质量检查清单
  - 包含完整的代码示例和数据库架构设计

### **📝 更新内容**
- `docs/README.md` - 添加财务数据处理技术指南链接
- `docs/development/financial_data_processing_guide.md` - 更新至v1.1版本
  - **单季口径统一**: 明确所有数据源的`n_income`和`n_income_attr_p`均为单季值
  - **数据源特性说明**: 详细说明Report/Express/Forecast各数据源的字段覆盖情况
  - **Forecast单季化逻辑**: 新增Forecast预告数据的单季化计算方法和代码示例
  - **数据库架构更新**: 更新PIT表结构，增加`conversion_status`字段和字段覆盖说明

### **🎯 目标**
- 防止财务数据处理逻辑错误重现
- 为开发团队提供权威的技术参考
- 确保数据处理的一致性和准确性
- 明确各数据源的字段覆盖和单季化处理逻辑

---

## 📋 **2025-01-XX - 文档重新整理和归档 (v2.0)**

### **🎯 整理目标**
- 创建统一的docs目录结构，按功能模块分类存放
- 移除重复或过时的文档，保留最新和有效的版本
- 创建主索引文档，提供清晰的文档导航
- 标准化文档命名，使用一致的命名规范

### **📁 新目录结构**
```
docs/
├── README.md                    # 文档中心主页
├── setup/                       # 安装配置文档
│   ├── installation.md         # 安装指南
│   └── configuration.md        # 配置指南
├── user/                        # 用户文档
│   ├── user_guide.md           # 用户指南
│   └── faq.md                  # 常见问题
├── development/                 # 开发文档
│   ├── tdd_guide.md            # TDD实践指南
│   └── contributing.md         # 贡献指南
├── architecture/                # 架构文档
│   ├── system_overview.md      # 系统架构概览
│   └── task_system.md          # 任务系统设计
├── api/                         # API文档
├── deployment/                  # 部署文档
├── business/                    # 业务文档
│   ├── data_sources.md         # 数据源说明
│   └── data_quality.md         # 数据质量验证
└── tools/                       # 工具文档
    └── cli.md                  # 命令行工具
```

### **📝 文档移动和重命名**

#### **已移动的文档**
| 原位置 | 新位置 | 说明 |
|--------|--------|------|
| `docs/user_guide.md` | `docs/user/user_guide.md` | 用户指南 |
| `docs/TDD_GUIDE.md` | `docs/development/tdd_guide.md` | TDD实践指南 |
| `docs/tusharedb_usage.md` | `docs/business/data_sources.md` | 数据源说明 |
| `design_plan.md` | `docs/architecture/task_system.md` | 任务系统设计 |
| `validation_workflow_improvement_plan.md` | `docs/business/data_quality.md` | 数据质量验证 |

#### **新创建的文档**
| 文档路径 | 说明 |
|----------|------|
| `docs/README.md` | 文档中心主页和导航 |
| `docs/setup/installation.md` | 详细安装指南 |
| `docs/setup/configuration.md` | 配置参数说明 |
| `docs/architecture/system_overview.md` | 系统架构概览 |
| `docs/user/faq.md` | 常见问题解答 |
| `docs/development/contributing.md` | 贡献指南 |
| `docs/tools/cli.md` | 命令行工具使用 |

### **🔗 链接更新**
- 更新了 `README.md` 中的文档链接
- 添加了完整的文档导航部分
- 修正了所有内部文档引用

### **📊 文档统计**
- **总文档数**: 12个主要文档
- **新增文档**: 7个
- **移动文档**: 5个
- **目录结构**: 8个分类目录

### **✨ 改进亮点**

#### **1. 结构化组织**
- 按功能域分类，便于查找和维护
- 清晰的层次结构，支持文档扩展
- 统一的命名规范

#### **2. 用户友好**
- 创建了文档中心主页，提供清晰导航
- 添加了详细的安装和配置指南
- 新增了常见问题解答

#### **3. 开发者支持**
- 完善了贡献指南和开发流程
- 详细的命令行工具使用说明
- 系统架构文档便于理解代码结构

#### **4. 业务价值**
- 数据源和数据质量文档帮助用户理解系统能力
- 配置指南支持不同环境的部署需求

### **🎯 后续计划**

#### **待完善的文档**
- [ ] API文档 (`docs/api/`)
- [ ] 部署文档 (`docs/deployment/`)
- [ ] 更多业务文档 (`docs/business/`)
- [ ] 模块详细设计文档

#### **文档质量提升**
- [ ] 添加更多代码示例
- [ ] 增加图表和流程图
- [ ] 完善错误处理说明
- [ ] 添加性能优化指南

#### **国际化支持**
- [ ] 考虑英文版本文档
- [ ] 多语言文档结构设计

---

## 📋 **历史版本记录**

### **v1.5 - 2025-01-XX**
- 添加验证流程改进方案
- 更新TDD实践指南

### **v1.4 - 2025-01-XX**
- 完善用户指南
- 添加GUI使用说明

### **v1.3 - 2025-01-XX**
- 更新架构设计文档
- 添加任务系统说明

### **v1.2 - 2025-01-XX**
- 初始用户指南创建
- 基础配置说明

### **v1.1 - 2025-01-XX**
- 项目README完善
- 基础文档结构

### **v1.0 - 2025-01-XX**
- 项目初始文档
- 基础README

---

## 🤝 **文档贡献**

### **贡献原则**
1. **准确性**: 确保文档内容与代码实现一致
2. **清晰性**: 使用简洁明了的语言和结构
3. **完整性**: 提供足够的示例和说明
4. **时效性**: 及时更新过时的内容

### **更新流程**
1. 识别需要更新的文档
2. 创建功能分支进行修改
3. 更新相关链接和引用
4. 提交Pull Request
5. 代码审查和合并
6. 更新此变更记录

### **文档规范**
- 使用Markdown格式
- 遵循统一的文档结构
- 包含适当的代码示例
- 添加必要的图表和截图

---

**文档整理完成！** 新的文档结构更加清晰、易于导航和维护。🚀
